var fastext={text:'',words:[],currentWord:0,wordsPerMinute:500,timer:null,demoText:'Fastext is the speed reading app. Fastext works by finding the optimal recognition point of each word and delivering it straight to your eyes, allowing you to read up to five times faster than would normally be possible. All you have to do is focus on the red character. It also pauses when there are punctuation marks to make the reading process as smooth as possible. To get started, tap the "load" icon in the bottom right',filter:function(a){for(var b='',c='',d=0;d<a.length;d++)' '==a[d]&&' '==b||('\n'==a[d]?c+=' ':c+=a[d]),b=a[d];return c},displayWord:function(a,b){var c=2;3>a.length?c=0:7>a.length&&(c=1);var d=a.slice(0,c)+'<span id="red">'+a.slice(c,c+1)+'</span>'+a.slice(c+1),e='&nbsp;'.repeat(3-c);$(b).html(e+d)},calcTimings:function(a){for(var d=[],e=0;e<a.length;e++){var f=a[e],g=f.slice(f.length-1);'.?!;'.includes(g)?d.push(f,f,f):',;)}]-'.includes(g)?d.push(f,f):d.push(f),7<f.length&&d.push(f)}return d},displayTime:function(a){a=Math.floor(a);var b=Math.floor(a/60),c=a-60*b,d='';return 10>b&&(d+='0'),d+=b,d+=':',10>c&&(d+='0'),d+=c,d},displaySpeed:function(){var a='Words per minute: '+this.wordsPerMinute;$('#speeddisplay').html(a)},loop:function(){this.displayWord(this.words[this.currentWord],'#word'),this.currentWord+1<this.words.length?(this.currentWord++,this.timer=setTimeout(this.loop.bind(this),60*(1e3/this.wordsPerMinute))):this.pause(),this.updateSliders(),this.updateTimestamps(),this.saveFastextState()},process:function(){this.currentWord=0,this.text=this.filter(this.text),this.text=this.filter(this.text),this.words=this.text.split(' '),this.words=this.calcTimings(this.words)},start:function(){this.process(),this.play()},pause:function(){window.clearTimeout(this.timer),$('#playbtn').css('display','block'),$('#pausebtn').css('display','none')},play:function(){this.loop(),$('#playbtn').css('display','none'),$('#pausebtn').css('display','block')},stepForward:function(){this.currentWord+1<this.words.length&&(this.currentWord++,this.displayWord(this.words[this.currentWord],'#word'))},stepBackward:function(){0<this.currentWord&&(this.currentWord--,this.displayWord(this.words[this.currentWord],'#word'))},updateSliders:function(){$('#scrubslider').slider('option','max',this.words.length-1),$('#scrubslider').slider('value',this.currentWord),$('#speedslider').slider('value',this.wordsPerMinute),this.displaySpeed()},updateTimestamps:function(){var a=60*this.words.length/this.wordsPerMinute;$('#timeTotal').html(this.displayTime(a));var b=60*this.currentWord/this.wordsPerMinute;$('#timePassed').html(this.displayTime(b))},initSliders:function(){$('#scrubslider').slider({animate:!1,min:0,max:fastext.words.length,value:fastext.currentWord,range:'min',slide:function(a,b){fastext.currentWord=b.value,fastext.displayWord(fastext.words[b.value],'#word'),fastext.updateTimestamps()}}),$('#speedslider').slider({animate:!1,min:100,max:800,value:fastext.wordsPerMinute,step:20,slide:function(a,b){fastext.wordsPerMinute=b.value,fastext.displaySpeed(),fastext.updateTimestamps()}})},loadFastextState:function(){if('undefined'!=typeof Storage){if(null===localStorage.getItem('fastextPlaybackState'))this.runDemo();else{var a=JSON.parse(localStorage.getItem('fastextPlaybackState'));this.words=a.words,this.wordsPerMinute=a.speed,this.currentWord=a.currentWord}this.initSliders(),this.updateSliders(),this.updateTimestamps()}},saveFastextState:function(){if('undefined'!=typeof Storage){var a=JSON.stringify({speed:this.wordsPerMinute,currentWord:this.currentWord,words:this.words});localStorage.setItem('fastextPlaybackState',a)}},runDemo:function(){this.text=this.demoText,this.process(),this.wordsPerMinute=400,this.saveFastextState()}};

// copyright Â© 2018 Daniel Fearn